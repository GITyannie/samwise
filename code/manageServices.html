<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <header>
        <h1 id="headingUser">Service Management</h1>
    </header>
</head>
<body>
    <!-- Form for creating a new service -->
    <h2>Create Service</h2>
    <form  action="/service/create" method="post" id="createForm">
        <label for="serviceName">Service Name:</label>
        <input type="text" id="serviceName" name="serviceName" required>
        
        <label for="serviceType">Service Type:</label>
        <input type="text" id="serviceType" name="serviceType" required>

        <label for="availableTimes">Available Times:</label>
        <input type="datetime-local" id="availableTimes" name="availableTimes" required>

        <!-- Assuming you have a way to identify the provider, for example, a hidden input with the provider's ID -->
       
        <button type="submit">Create Service</button>
    </form>


    <!-- Form for editing a service -->
    <h2>Edit Service</h2>
    <form id="editForm" action="/service/edit" method="post">
        <label for="serviceUUID">Service UUID:</label>
        <input type="text" name="serviceUUID" id="serviceUUID" required>

        <label for="editServiceName">Service Name:</label>
        <input type="text" id="editServiceName" name="editServiceName" required>
        
        <label for="editServiceType">Service Type:</label>
        <input type="text" id="editServiceType" name="editServiceType" required>

        <label for="editAvailableTimes">Available Times:</label>
        <input type="datetime-local" id="editAvailableTimes" name="editAvailableTimes" required>

        <button type="submit">Edit Service</button>
    </form>

    <!-- Form for deleting a service -->
    <h2>Delete Service</h2>

    <form action="/service/delete" method="post">
        <!-- Input field for the user to enter the service UUID -->
        <label for="serviceUUID">Service UUID:</label>
        <input type="text" name="serviceUUID" id="serviceUUID" required>
        
        <button type="submit">Delete Service</button>
    </form>
  

    <!-- Display the list of services -->
    <h2>Service List</h2>
    <ul id="serviceList"></ul>

    <script>
        function createService() {
            var serviceName = document.getElementById('serviceName').value;
            var serviceType = document.getElementById('serviceType').value;
            var availableTimes = document.getElementById('availableTimes').value;
            var providerId = document.getElementById('providerId').value;

            console.log('Service Name:', serviceName);
            console.log('Service Type:', serviceType);
            console.log('Available Times:', availableTimes);
            console.log('Provider ID:', providerId);
            // Implement logic to send the data to the server for creating a new service
            // You can use serviceName, serviceType, availableTimes, and providerId in your request

            // Update the service list on success
            updateServiceList();
        }

        function editService() {
            var editServiceName = document.getElementById('editServiceName').value;
            var editServiceType = document.getElementById('editServiceType').value;
            var editAvailableTimes = document.getElementById('editAvailableTimes').value;

            // Implement logic to send the data to the server for editing the service
            // You can use editServiceName, editServiceType, and editAvailableTimes in your request

            // Update the service list on success
            updateServiceList();
        }

        function deleteService() {
            var deleteServiceName = document.getElementById('deleteServiceName').value;
            // Implement logic to send the data to the server for deleting the service
            // You can use deleteServiceName in your request

            // Update the service list on success
            updateServiceList();
        }

        function updateServiceList() {
            // Implement logic to fetch the service list from the server
            // Update the serviceList element with the fetched data
            var serviceList = document.getElementById('serviceList');
            serviceList.innerHTML = '<li>Service 1</li><li>Service 2</li><li>Service 3</li>';
        }

        // Function to get URL parameters
        function getParameterByName(name, url) {
          if (!url) url = window.location.href;
          name = name.replace(/[\[\]]/g, '\\$&');
          var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
              results = regex.exec(url);
          if (!results) return null;
          if (!results[2]) return '';
          return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }

        // Get and display the username from the URL
        var username = getParameterByName('username');
        var welcomeMessage = document.getElementById('headingUser');
        if (username) {
          welcomeMessage.innerHTML = 'Service Management for ' + username + '!';
        } else {
          welcomeMessage.innerHTML = 'Service Management';
        }
    </script>
</body>
</html>
